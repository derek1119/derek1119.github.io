# Closures

클로저는 인라인 함수(inline function)이다. 클로저에서 흥미로운 점은 이것 역시 힙 메모리 안에 저장된다는 것이다. 클로저는 기본적으로 참조(reference) 타입이다. 왜냐하면 클로저는 단지 함수고 함수는 스위프트에서 일반 타입이다.  

### Capturing

클로저는 힙에 저장된다. 클로저가 운영되는 방식에는 흥미로운 결과가 있는데 클로저 내부에는 그 주변에 있는 범위 안의 모든 변수를 참조할 수 있다. 그래서 지역 변수들을 참조할 수 있다. 인스턴스 변수든 클래스의 프로퍼티이든 클로저로 선언한 메소드의 안에 있다면 이 모든 것들에 접근하는 것이 허용된다. 단순히 접근만 하는게 아니라 읽고 쓸 수도 있다. 지역 변수를 넣은 클로저 중 하나에 지역변수를 캡처하면 그 지역 변수들 역시 보관되어야 한다. 스위프트는 이를 자동으로 처리해준다. 크롤저 안에 캡처가 된 모든 것들은 이미 힙 안에 있다면 클로저로부터 strong 포인터를 갖고 그렇지 않으면 힙으로 옮겨지게 된다. 그래서 모든 것들이 힙에 있는 것이다. 클로저 안에 있거나 실행할 때 내부적으로 참조되는 모든 것들이 힙에 모이게 된다. 



